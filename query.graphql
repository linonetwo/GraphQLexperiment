query MainPageData($token: String!) {
  User(token: $token) {
    id
    logined
    name
    companyName
    departmentName
    role
  }
  Company(token: $token) {
    id
    name
    pie {
      total
      current
      rate
      unit
    }
    unreadAlarmAmount
    unConfirmedAlarmAmount
  }
}

query SiteDetailData($token: String!, $districtID: Int!, $siteID: Int!) {
  Company(token: $token) {
    id
    district: children(id: $districtID) {
      id
      name
      areaType
      site: children(id: $siteID) {
        id
        name
        unreadAlarmAmount
        pie {
          total
          current
          rate
          unit
        }
        infos {
          name
          value
        }
        wires {
          name
          current
          total
          unit
          deviceId
          cabinetID
          indicators {
            code
            value
          }
        }
        areaType
      }
    }
  }
  Config {
    indicatorTypes(token: $token) {
      id
      key
      name
      unit
    }
  }
}

query LineChartData($token: String!, $areaType: AreaType!, $districtID: Int, $siteID: Int, $deviceID: Int, $sources: [String], $fromTime: String, $toTime: String, $scale: String) {
  Config {
    indicatorTypes(token: $token) {
      id
      key
      name
      unit
    }
  }
  LineChart(token: $token, areaType: $areaType, sources: $sources, districtID: $districtID, siteID: $siteID, deviceID: $deviceID, fromTime: $fromTime, toTime: $toTime, scale: $scale) {
    source
    lineChart {
      time
      value
    }
  }
  LineChartSources(token: $token, areaType: $areaType, districtID: $districtID, siteID: $siteID, deviceID: $deviceID)
}

query DistrictListData($token: String!) {
  Company(token: $token) {
    id
    district: children {
      id
      name
      areaType
      site: children {
        id
        name
        areaType
      }
    }
  }
}

query DistrictDetailData($token: String!, $districtID: Int!) {
  Company(token: $token) {
    id
    district: children(id: $districtID) {
      id
      name
      pie {
        total
        current
        rate
        unit
      }
      site: children {
        id
        name
      }
    }
  }
}

query DeviceListData($token: String!, $districtID: Int!, $siteID: Int!) {
  Company(token: $token) {
    id
    district: children(id: $districtID) {
      id
      site: children(id: $siteID) {
        id
        name
        cabinets {
          id
          name
          type
          switches {
            id
            isOn
            name
          }
        }
      }
    }
  }
}

query DeviceDetailData($token: String!, $districtID: Int!, $siteID: Int!, $cabinetID: Int!, $deviceID: Int!) {
  Config {
    indicatorTypes(token: $token) {
      id
      key
      name
      unit
    }
  }
  Company(token: $token) {
    id
    district: children(id: $districtID) {
      id
      site: children(id: $siteID) {
        id
        cabinets(id: $cabinetID) {
          id
          switches(id: $deviceID) {
            id
            isOn
            name
            unreadAlarmAmount
            alarmInfos {
              id
              deviceName
              code
            }
            realtimeData {
              code
              value
            }
          }
        }
      }
    }
  }
  List: Company(token: $token) {
    id
    district: children(id: $districtID) {
      id
      site: children(id: $siteID) {
        id
        name
        cabinets(id: $cabinetID) {
          id
          switches {
            id
            name
          }
        }
      }
    }
  }
}

query AlarmData(
    $token: String!,
    $areaType: AreaType!,
    $districtID: Int,
    $siteID: Int,
    $gatewayID: Int,
    $cabinetID: Int,
    $deviceID: Int,
    $pagesize: Int,
    $pageIndex: Int,
    $orderBy: OrderByType,
    $fromTime: String,
    $toTime: String,
    $alarmCodes: [String]
  ) {
  Alarm(
    token: $token,
    areaType: $areaType,
    districtID: $districtID,
    siteID: $siteID,
    gatewayID: $gatewayID,
    cabinetID: $cabinetID,
    deviceID: $deviceID,
    pagesize: $pagesize,
    pageIndex: $pageIndex,
    orderBy: $orderBy,
    fromTime: $fromTime,
    toTime: $toTime,
    alarmCodes: $alarmCodes
  ) {
    id
    code
    timestamp
    readed
    confirmed
    message

    confirmedUserID
    confirmedUserName
    districtID
    districtName
    siteID
    siteName
    gatewayID
    gatewayName
    cabinetID
    cabinetName
    deviceID
    deviceName
  }
  User(token: $token) {
    id
    name
    companyId
  }
  Config {
    alarmTypes {
      code
      label
    }
  }
}

mutation GetToken($userName: String!, $passWord: String!) {
  getToken(username: $userName, password: $passWord) {
    token
    error
  }
}


